<div class="card">
  <h1>Bug Tracker</h1>
  <p>Manage and track all reported bugs</p>

  <div *ngIf="loading" class="loading-container">
    <p>Loading bugs...</p>
  </div>

  <div *ngIf="error" class="error-container">
    <p class="error-message">{{ error }}</p>
  </div>

  <p-table 
    *ngIf="!loading && !error" 
    [value]="bugs" 
    [tableStyle]="{ 'min-width': '50rem' }"
    [paginator]="true" 
    [rows]="10"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} bugs"
    [rowsPerPageOptions]="[5, 10, 25]"
    styleClass="p-datatable-sm">
    
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Description</th>
        <th>Status</th>
        <th>Created On</th>
        <th>Project ID</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="body" let-bug>
      <tr>
        <td>{{ bug.id }}</td>
        <td>
          <strong>{{ bug.title }}</strong>
        </td>
        <td>
          <span class="description-text">{{ bug.description }}</span>
        </td>
        <td>
          <p-tag 
            [value]="getStatusLabel(bug.status)" 
            [severity]="getStatusSeverity(bug.status)">
          </p-tag>
        </td>
        <td>{{ formatDate(bug.createdOn) }}</td>
        <td>{{ bug.projectId }}</td>
        <td>
          <div class="action-buttons">
            <p-button 
              icon="pi pi-eye" 
              severity="info" 
              size="small" 
              [text]="true"
              pTooltip="View Details">
            </p-button>
            <p-button 
              icon="pi pi-pencil" 
              severity="secondary" 
              size="small" 
              [text]="true"
              pTooltip="Edit Bug">
            </p-button>
            <p-button 
              icon="pi pi-trash" 
              severity="danger" 
              size="small" 
              [text]="true"
              pTooltip="Delete Bug">
            </p-button>
          </div>
        </td>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7" class="text-center">
          <p>No bugs found.</p>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
